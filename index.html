0<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3597905180490877"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VS Code Web - Pro</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/codicon/0.0.32/codicon.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

    <style>
        :root {
            --bg-dark: #1e1e1e;
            --bg-sidebar: #252526;
            --bg-activity: #333333;
            --bg-panel: #1e1e1e;
            --bg-status: #007acc;
            --border: #2b2b2b;
            --text-main: #cccccc;
            --accent: #007acc;
            --btn-install: #007acc;
            --btn-manage: #3c3c3c;
        }

        * { box-sizing: border-box; outline: none; user-select: none; }
        body { margin: 0; padding: 0; background: var(--bg-dark); color: var(--text-main); font-family: 'Segoe UI', sans-serif; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        /* --- LAYOUT --- */
        .title-bar { height: 35px; background: #3c3c3c; display: flex; align-items: center; justify-content: space-between; padding: 0 10px; font-size: 13px; }
        .workbench { flex: 1; display: flex; height: calc(100vh - 57px); position: relative; }
        
        /* Activity Bar */
        .activity-bar { width: 48px; background: var(--bg-activity); display: flex; flex-direction: column; align-items: center; padding-top: 10px; z-index: 10; }
        .icon { font-size: 24px; color: #858585; margin-bottom: 25px; cursor: pointer; border-left: 2px solid transparent; width: 100%; text-align: center; padding: 5px 0; position: relative; }
        .icon:hover { color: white; }
        .icon.active { color: white; border-left: 2px solid white; }

        /* Sidebar */
        .sidebar { width: 260px; background: var(--bg-sidebar); border-right: 1px solid #000; display: flex; flex-direction: column; }
        .sidebar-view { display: none; flex: 1; flex-direction: column; }
        .sidebar-view.active { display: flex; }
        
        .sidebar-header { padding: 10px 20px; font-size: 11px; font-weight: bold; text-transform: uppercase; display: flex; justify-content: space-between; align-items: center; height: 35px; }
        .sidebar-actions { display: flex; gap: 10px; }
        .sidebar-btn { cursor: pointer; color: #ccc; font-size: 14px; }
        .sidebar-btn:hover { color: white; }

        /* File Tree */
        .file-tree { flex: 1; overflow-y: auto; }
        .file-item { padding: 4px 20px; cursor: pointer; font-size: 13px; display: flex; align-items: center; gap: 6px; color: var(--text-main); }
        .file-item:hover { background: #2a2d2e; }
        .file-item.selected { background: #37373d; color: white; }

        /* Extensions List */
        .ext-item { padding: 10px; border-bottom: 1px solid #333; display: flex; gap: 10px; }
        .ext-icon { width: 40px; height: 40px; background: #3c3c3c; display: flex; align-items: center; justify-content: center; border-radius: 3px; font-size: 20px; }
        .ext-info { flex: 1; overflow: hidden; }
        .ext-title { font-weight: bold; font-size: 13px; display: block; margin-bottom: 2px; }
        .ext-desc { font-size: 11px; color: #888; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: block; margin-bottom: 5px; }
        .btn-ext { border: none; padding: 4px 10px; font-size: 11px; cursor: pointer; border-radius: 2px; color: white; width: 100%; }
        .btn-install { background: var(--btn-install); } .btn-install:hover { background: #0062a3; }
        .btn-manage { background: var(--btn-manage); }

        /* Editor Area */
        .editor-group { flex: 1; display: flex; flex-direction: column; background: var(--bg-dark); position: relative; }
        .tabs-header { background: #252526; height: 35px; display: flex; overflow-x: auto; align-items: center; }
        .tab { background: #2d2d2d; padding: 8px 15px; font-size: 13px; border-right: 1px solid #1e1e1e; cursor: pointer; display: flex; align-items: center; gap: 8px; color: #969696; border-top: 2px solid transparent; }
        .tab.active { background: #1e1e1e; color: white; border-top: 2px solid var(--accent); }
        .tab-close { border-radius: 5px; padding: 2px; margin-left: 5px; }
        .tab-close:hover { background: #444; color: white; }
        
        #monaco-container { flex: 1; width: 100%; display: none; } 
        
        /* Welcome Screen */
        #welcome-screen { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; background: var(--bg-dark); color: #ccc; }
        .welcome-logo { font-size: 100px; color: #2b2b2b; margin-bottom: 20px; }
        .welcome-content { display: flex; gap: 40px; }
        .welcome-col h3 { font-size: 14px; color: white; margin-bottom: 10px; font-weight: 500; }
        .welcome-action { font-size: 13px; color: #007acc; cursor: pointer; margin-bottom: 8px; display: flex; align-items: center; gap: 5px; }
        .welcome-action:hover { text-decoration: underline; }

        /* Terminal Panel */
        .bottom-panel { height: 150px; background: var(--bg-panel); border-top: 1px solid var(--border); display: none; flex-direction: column; }
        .bottom-panel.open { display: flex; }
        .panel-header { height: 30px; display: flex; gap: 20px; padding: 0 15px; align-items: center; font-size: 11px; text-transform: uppercase; border-bottom: 1px solid #333; }
        .terminal-content { flex: 1; padding: 10px; font-family: 'Consolas', monospace; font-size: 13px; overflow-y: auto; color: #ccc; }
        .term-line { margin-bottom: 2px; }

        /* Status Bar */
        .status-bar { height: 22px; background: var(--bg-status); color: white; display: flex; justify-content: space-between; padding: 0 10px; font-size: 11px; align-items: center; }

        /* Buttons */
        .nav-btn { background: transparent; color: #cccccc; border: none; cursor: pointer; font-size: 16px; margin-left: 10px; }
        .nav-btn:hover { color: white; }
        .run-btn { position: absolute; top: 6px; right: 15px; background: transparent; color: #4ec9b0; border: none; cursor: pointer; font-size: 16px; z-index: 20; display: none; }
        .run-btn:hover { color: white; transform: scale(1.1); transition: 0.1s; }
    </style>
</head>
<body>

    <div class="title-bar">
        <div style="display:flex; gap:15px; align-items:center;">
            <i class="codicon codicon-vscode" style="color: #007acc; font-size: 18px;"></i>
            <span>File</span>
            <span>Edit</span>
            <span>View</span>
            <span>Go</span>
            <span>Run</span>
            <span>Terminal</span>
            <span>Help</span>
        </div>
        <div style="font-size: 12px; color: #888;">VS Code Web Pro</div>
        <div>
            <button class="nav-btn" onclick="downloadProject()" title="Download Project (.zip)">
                <i class="codicon codicon-cloud-download"></i>
            </button>
            <i class="codicon codicon-layout-sidebar-right" style="cursor:pointer; margin-left:10px;"></i>
        </div>
    </div>

    <div class="workbench">
        <div class="activity-bar">
            <div class="icon active" onclick="switchView('explorer', this)"><i class="codicon codicon-files"></i></div>
            <div class="icon" onclick="switchView('search', this)"><i class="codicon codicon-search"></i></div>
            <div class="icon" onclick="switchView('git', this)"><i class="codicon codicon-source-control"></i></div>
            <div class="icon" onclick="switchView('extensions', this)"><i class="codicon codicon-extensions"></i></div>
            <div style="margin-top: auto; margin-bottom: 10px;">
                <div class="icon"><i class="codicon codicon-settings-gear"></i></div>
            </div>
        </div>

        <div class="sidebar">
            <div id="view-explorer" class="sidebar-view active">
                <div class="sidebar-header">
                    <span>Explorer</span> 
                    <div class="sidebar-actions">
                        <i class="codicon codicon-new-file sidebar-btn" onclick="createNewFile()" title="New File"></i>
                        <i class="codicon codicon-new-folder sidebar-btn" onclick="alert('Simulated Folder')" title="New Folder"></i>
                    </div>
                </div>
                <div class="file-tree" id="file-list"></div>
            </div>

            <div id="view-extensions" class="sidebar-view">
                <div class="sidebar-header"><span>Extensions</span> <i class="codicon codicon-filter"></i></div>
                <div style="padding: 10px;"><input type="text" placeholder="Search Extensions" style="width:100%; background:#3c3c3c; border:1px solid #007acc; color:white; padding:5px;"></div>
                <div id="ext-list" style="overflow-y: auto;"></div>
            </div>
        </div>

        <div class="editor-group">
            <div class="tabs-header" id="tabs-container"></div>
            
            <div id="welcome-screen">
                <i class="codicon codicon-vscode welcome-logo"></i>
                <div class="welcome-content">
                    <div class="welcome-col">
                        <h3>Start</h3>
                        <div class="welcome-action" onclick="createNewFile()"><i class="codicon codicon-new-file"></i> New File...</div>
                        <div class="welcome-action"><i class="codicon codicon-folder-opened"></i> Open Folder...</div>
                    </div>
                </div>
            </div>

            <button class="run-btn" onclick="runCode()" id="btn-run" title="Run / Preview">
                <i class="codicon codicon-play"></i>
            </button>

            <div id="monaco-container"></div>

            <div class="bottom-panel" id="terminal-panel">
                <div class="panel-header">
                    <span class="panel-tab active">Terminal</span>
                    <span class="panel-tab">Output</span>
                    <i class="codicon codicon-close" style="margin-left:auto; cursor:pointer;" onclick="toggleTerminal(false)"></i>
                </div>
                <div class="terminal-content" id="term-output"></div>
            </div>
        </div>
    </div>

    <div class="status-bar" id="status-bar">
        <div style="display:flex; height:100%; align-items:center;">
            <div style="margin-left: 10px; display:flex; gap:10px;">
                <span><i class="codicon codicon-source-control"></i> main*</span>
                <span><i class="codicon codicon-error"></i> 0</span>
            </div>
        </div>
        <div style="display:flex; gap:15px;">
            <span id="lang-display">Plain Text</span>
            <span>Ln 1, Col 1</span>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>
    <script>
        require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.1/min/vs' }});

        let editor;
        let activeFile = 'index.html';
        
        let extensions = [
            { id: 'emmet', name: 'Emmet', desc: 'The essential toolkit for web-developers.', icon: 'code', installed: true },
            { id: 'python', name: 'Python', desc: 'Linting, Debugging (Microsoft)', icon: 'symbol-method', installed: true },
            { id: 'cpp', name: 'C/C++', desc: 'IntelliSense, debugging, and browsing.', icon: 'symbol-class', installed: true },
            { id: 'java', name: 'Extension Pack for Java', desc: 'Java support for VS Code', icon: 'coffee', installed: true },
            { id: 'csharp', name: 'C# Dev Kit', desc: 'Official C# extension', icon: 'code', installed: true },
            { id: 'go', name: 'Go', desc: 'Rich Go language support', icon: 'symbol-namespace', installed: true },
            { id: 'sql', name: 'SQL Server', desc: 'Develop SQL Server databases', icon: 'database', installed: true }
        ];

        let fileSystem = {
            'index.html': `<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>Document</title>\n</head>\n<body>\n    <h1>Hello World</h1>\n</body>\n</html>`
        };

        require(['vs/editor/editor.main'], function() {
            editor = monaco.editor.create(document.getElementById('monaco-container'), {
                value: fileSystem['index.html'],
                language: 'html',
                theme: 'vs-dark',
                automaticLayout: true,
                minimap: { enabled: true }
            });
            updateUI();
            renderExtensions();
            initEmmet();
        });

        // --- EMMET SIMULATION (FIXED) ---
        function initEmmet() {
            editor.addCommand(monaco.KeyCode.Tab, function() {
                const model = editor.getModel();
                const pos = editor.getPosition();
                const word = model.getWordUntilPosition(pos);
                const range = new monaco.Range(pos.lineNumber, word.startColumn, pos.lineNumber, word.endColumn);
                const text = word.word;

                let expansion = null;

                if (text === '!') {
                    expansion = `<!DOCTYPE html>\n<html lang="en">\n<head>\n\t<meta charset="UTF-8">\n\t<meta name="viewport" content="width=device-width, initial-scale=1.0">\n\t<title>Document</title>\n</head>\n<body>\n\t$0\n</body>\n</html>`;
                } else if (['div', 'p', 'span', 'h1', 'h2', 'h3', 'ul', 'li', 'header', 'footer', 'button'].includes(text)) {
                    expansion = `<${text}>$0</${text}>`;
                } else if (text === 'link') {
                    expansion = `<link rel="stylesheet" href="$0">`;
                } else if (text === 'script') {
                    // FIXED LINE BELOW: Added backslash to escape script tag
                    expansion = `<script src="$0"><\/script>`; 
                }

                if (expansion) {
                    editor.executeEdits("emmet", [{
                        range: range,
                        text: expansion,
                        forceMoveMarkers: true
                    }]);
                } else {
                    editor.trigger('keyboard', 'type', { text: "\t" });
                }
            });
        }

        // --- CORE UI LOGIC ---
        function updateUI() {
            const list = document.getElementById('file-list');
            list.innerHTML = '';
            Object.keys(fileSystem).forEach(f => {
                const isSelected = activeFile === f ? 'selected' : '';
                let icon = 'file';
                if(f.endsWith('.html')) icon = 'file-code';
                else if(f.endsWith('.py')) icon = 'symbol-method';
                else if(f.endsWith('.js')) icon = 'symbol-variable';
                
                list.innerHTML += `<div class="file-item ${isSelected}" onclick="openFile('${f}')"><i class="codicon codicon-${icon}"></i> ${f}</div>`;
            });

            const tabs = document.getElementById('tabs-container');
            const welcome = document.getElementById('welcome-screen');
            const monacoDiv = document.getElementById('monaco-container');
            const runBtn = document.getElementById('btn-run');

            if(activeFile === 'Welcome' || !activeFile) {
                tabs.innerHTML = `<div class="tab active" style="font-style:italic;"><span>Welcome</span> <span class="tab-close" onclick="closeFile()">×</span></div>`;
                welcome.style.display = 'flex';
                monacoDiv.style.display = 'none';
                runBtn.style.display = 'none';
            } else {
                tabs.innerHTML = `<div class="tab active"><span>${activeFile}</span> <span class="tab-close" onclick="closeFile()">×</span></div>`;
                welcome.style.display = 'none';
                monacoDiv.style.display = 'block';
                runBtn.style.display = 'block'; 
                
                const ext = activeFile.split('.').pop();
                let lang = 'plaintext';
                if(ext === 'js') lang = 'javascript';
                if(ext === 'html') lang = 'html';
                if(ext === 'py') lang = 'python';
                if(ext === 'java') lang = 'java';
                if(ext === 'c' || ext === 'cpp') lang = 'cpp';
                if(ext === 'go') lang = 'go';
                if(ext === 'sql') lang = 'sql';
                if(ext === 'cs') lang = 'csharp';
                
                monaco.editor.setModelLanguage(editor.getModel(), lang);
                document.getElementById('lang-display').innerText = lang.toUpperCase();
            }
        }

        function openFile(f) {
            if(activeFile && activeFile !== 'Welcome') fileSystem[activeFile] = editor.getValue();
            activeFile = f;
            editor.setValue(fileSystem[f]);
            updateUI();
        }

        function closeFile() {
            if(activeFile && activeFile !== 'Welcome') fileSystem[activeFile] = editor.getValue();
            activeFile = 'Welcome';
            updateUI();
        }

        function createNewFile() {
            const name = prompt("File Name (e.g., test.py, main.c):", "untitled.txt");
            if(name && !fileSystem[name]) {
                fileSystem[name] = "";
                openFile(name);
            }
        }

        function downloadProject() {
            if(activeFile && activeFile !== 'Welcome') fileSystem[activeFile] = editor.getValue(); 
            const zip = new JSZip();
            Object.keys(fileSystem).forEach(filename => { zip.file(filename, fileSystem[filename]); });
            zip.generateAsync({type:"blob"}).then(function(content) { saveAs(content, "vscode-project.zip"); });
        }

        function runCode() {
            if(activeFile === 'Welcome') return;
            const currentCode = editor.getValue();
            fileSystem[activeFile] = currentCode;
            const ext = activeFile.split('.').pop();

            if(ext === 'html') {
                const blob = new Blob([currentCode], {type: 'text/html'});
                window.open(URL.createObjectURL(blob), '_blank');
                return;
            }

            toggleTerminal(true);
            const term = document.getElementById('term-output');
            term.innerHTML += `<div style="margin-top:10px; border-top:1px solid #333; padding-top:5px;"></div>`;
            
            let cmd = "";
            let output = "";
            let compileTime = 0;

            if(ext === 'py') { cmd = `python3 "${activeFile}"`; output = "Hello from Python!"; }
            else if(ext === 'js') { cmd = `node "${activeFile}"`; output = "Script executed."; }
            else { cmd = `Running ${activeFile}...`; output = "Done."; }

            logTerm(`<span style="color:#ccc">$ ${cmd}</span>`);
            setTimeout(() => {
                logTerm(output);
                logTerm(`<span style="color:#3fb950">[Done] exited with code=0</span>`);
            }, 300 + compileTime);
        }

        function renderExtensions() {
            const list = document.getElementById('ext-list');
            list.innerHTML = '';
            extensions.forEach(ext => {
                list.innerHTML += `
                    <div class="ext-item">
                        <div class="ext-icon"><i class="codicon codicon-${ext.icon}"></i></div>
                        <div class="ext-info">
                            <span class="ext-title">${ext.name}</span>
                            <span class="ext-desc">${ext.desc}</span>
                            <div style="display:flex; gap:5px; margin-top:5px;">
                                <button class="btn-ext ${ext.installed ? 'btn-manage' : 'btn-install'}" onclick="toggleExtension('${ext.id}')">
                                    ${ext.installed ? 'Manage' : 'Install'}
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        function toggleExtension(id) {
            const ext = extensions.find(e => e.id === id);
            ext.installed = !ext.installed;
            renderExtensions();
        }

        function switchView(viewName, btnInfo) {
            document.querySelectorAll('.sidebar-view').forEach(el => el.classList.remove('active'));
            document.getElementById('view-' + viewName).classList.add('active');
            document.querySelectorAll('.activity-bar .icon').forEach(el => el.classList.remove('active'));
            if(btnInfo) btnInfo.classList.add('active');
        }

        function toggleTerminal(show) {
            document.getElementById('terminal-panel').classList.toggle('open', show);
            editor.layout();
        }

        function logTerm(msg) {
            const t = document.getElementById('term-output');
            t.innerHTML += `<div class="term-line">${msg}</div>`;
            t.scrollTop = t.scrollHeight;
        }

    </script>
</body>
</html>
